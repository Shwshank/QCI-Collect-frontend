<div class="col-sm-12 text-right pt-3 pl-0 pr-0"><!--pos-abso-tr-->
  <button type="button" class="btn btn-primary mb-0 col-sm-5 col-md-4 col-lg-2 pt-3 pb-3 float-right" (click)='new()'>+ New</button>
  <input type="text" class="form-control col-sm-10 col-md-10 col-lg-10 float-right pt-3 pb-3" placeholder="Search Forms" />
</div>
<div class="container-fluid text-center mt-0 pr-0 pl-0" style="min-height:93vh"><!--background:#fff; box-shadow:0 1px 1px #a9a8a9;-->
  <div class="tab-content">
    <div class="tab-pane active" role="tabpanel"><br /><br /><br />
      <div class="row text-left ofy col-sm-12 pl-0 pr-0 ml-0 mr-0" style="height:82vh;">
        <div *ngFor='let form of formArray; let i = index' class="col-sm-6 p-2" style="margin-bottom:7px;">
          <div class="card cbx">
            <div class="card-block p-0">
              <div class="col-sm-12 pl-4 pt-3 mt-2 pb-2 bb">
                <h5 class="card-title">{{form.Details.name | shorten: 24: '...'}}</h5>
                <h4 class="card-subtitle mb-2 text-muted"> {{form.Details.project | shorten: 24: '...'}} </h4>
              </div>
              <div class="col-sm-12 pl-2 pr-2 pt-3 pb-3 row m-0">
                <p class="card-text col-sm-12">Some text here...Some text here...Some text here...Some text here...Some text here...Some text here...</p>
              </div>
              <!--<div class="col-sm-12 row ml-0 mr-0 mb-3 pl-4 pr-4"></div>-->
              <div class="col-12 pb-0 mt-3 ml-2 mb-0">
                <button class="btn btn-primary mr-2 mb-2" type="button" [routerLink]="['../formBuilder']" [queryParams]="{formID : form.Details.cid }">View form</button>
                <button class="btn btn-primary bg-white mr-2 mb-2" (click)='rule(form.Rules, form.Details.cid, form.Elements)' type="button" data-toggle="modal" data-target="#rules">Rule/s</button>
                <button class="btn btn-primary bg-white mr-2 mb-2" (click)='getResponse(form.Details.cid)' type="button" data-toggle="modal" data-target="#rules">{{form.Details.responses}} Responses </button>
                <!--<a class="card-link col-6 d-inline-block pt-2 float-right text-right">-->
                    <!--<input type="checkbox" class="form-check-input" [checked]=checkStatus(form.Details.cid) (change)='changeStatus(form.Details.cid)' />{{form.Details.status}}-->
                <div class="p-2 float-right mr-3">
                  <label class="custom-control custom-control-lg custom-checkbox m-0 float-right">
                    <input type="checkbox" class="custom-control-input form-check-input" name="checkbox-size" [checked]=checkStatus(form.Details.cid) (change)='changeStatus(form.Details.cid)' />
                    <span class="custom-control-indicator"></span><span class="col-sm-12 pl-2 pr-2">{{form.Details.status}}</span>
                  </label>
                </div>
                <!--</a>-->
              </div>
              <br />
            </div>
          </div>
        </div>
        <br />
        <!--<button type="button" class="btn btn-primary mb-5 col-sm-5 col-md-4 col-lg-2 pt-3 pb-3" (click)='sync()'><i class="fa fa-refresh" aria-hidden="true"></i> Sync</button>-->
      </div>
      <button type="button" class="btn btn-primary bg-white mb-0 mt-2 float-left ml-2" (click)='syncCollectFrom($event)'><i class="fa fa-refresh" aria-hidden="true"></i> 1. Sync Collect Form</button>
      &nbsp;
      <button type="button" class="btn btn-primary bg-white mb-0 mt-2 ml-3 float-left" (click)='syncCollectFromRule($event)'><i class="fa fa-refresh" aria-hidden="true"></i> 2. Sync Collect Rules</button>
    </div>
  </div>
</div>
<!-- rule modal starts here-->
<div class="modal fade" id="rules" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Rules</h5>
      </div>
      <div class="modal-body text-center" style="height:500px;overflow-y:auto;">
        <div class="row justify-content-center m-0 text-left">
          <div class="p-5 m-5" *ngIf='rulesArray.length < 1' >
            <h4 class="pt-5 mt-5">No Rule was created</h4>
          </div>
          <div *ngFor='let rule of rulesArray; let i = index' class="row col-sm-12 p-3 m-3 cbx brd-def" style="box-shadow:none;">
            <div class="col-8 pl-0">
              <h5>{{i+1}}. Rule Name: {{rule.name}}</h5>
              <p>Element: {{rule.elementName}}</p>
              <p>Condition: <b>{{rule.elementValue}}</b></p>
              <p>Associated Template: <b>{{rule.tempName}}</b></p>
            </div>
            <div class="col-4 text-right pr-0">
              <a class="card-link btn btn-primary bg-white pt-2 pb-2 m-1" href="#" >Edit</a>
              <a class="card-link btn btn-danger bg-white pt-2 pb-2 m-1 text-danger" href="#">Delete</a>
            </div>
          </div>
        </div>
        <!-- <a href="#"  class="text-center">Add Rule</a> -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary col-sm-3 pt-3 pb-3" data-toggle="modal" data-target="#addRules">+ Add rule</button>
        <button type="button" class="btn btn-secondary col-sm-3 pt-3 pb-3" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- rule modal ends here-->
<!--Add rule modal starts here-->
<div class="modal fade" id="addRules" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">+ Add Rules</h5>
      </div>
      <div class="modal-body text-center" style="height:500px;overflow-y: auto">
        <div class="col-sm-12">
          <label class="row ml-0 mr-0 mb-4">
            <span class="col-4 text-left pt-2 pl-0">Rull Name :</span>
            <input type="text" name="rule name" value="" [(ngModel)]='ruleName' placeholder="Rule Name" class="col-7 form-control pt-2 pb-2" />
          </label>
          <label class="row ml-0 mr-0 mb-4">
            <span class="col-4 text-left pt-2 pl-0">1. Select Element :</span>
            <select [(ngModel)]="ruleElement" (change)='getVal()' class="col-7 form-control">
              <option *ngFor='let opt of rnameArray; let i=i' [ngValue]=opt  >{{opt.name}}</option>
            </select>
          </label>
          <label class="row ml-0 mr-0 mb-4">
            <span class="col-4 text-left pt-2 pl-0">2. Condition : Equals</span>
          </label>
          <label class="row ml-0 mr-0 mb-4">
            <span class="col-4 text-left pt-2 pl-0">3. Value :</span>
            <input type="text" name="" value="" [(ngModel)]='ruleTarget' class="col-7 form-control pt-2 pb-2" />
            <i *ngIf='hint' > hint: {{hint}}</i><!--css not Defined yet-->
            <i>(* If multiple, saparated by commas)</i>
          </label>
          <input type="checkbox" class="form-check-input" [checked]="satisfyAll" (change)='satisfyAllCondition()' />
          Satisfy all conditions (Only if multiple!)
          <label class="row ml-0 mr-0 mb-4">
            <span class="col-4 text-left pt-2 pl-0">4. Associate template :</span>
            <select [(ngModel)]="ruleTempTail" class="col-7 form-control">
              <option *ngFor='let opt of templateArray; let i=i' [ngValue]=opt  >{{opt.Details.name}}</option>
            </select>
          </label>
          <label class="row ml-0 mr-0 mb-1">
            <span class="col-4 text-left pt-2 pl-0">&nbsp;</span>
            - - OR - -
          </label>
          <label class="row ml-0 mr-0 mb-5">
            <span class="col-4 text-left pt-2 pl-0">5. Associate form element :</span>
            <select [(ngModel)]="ruleFormQuestion" class="col-7 form-control">
              <option *ngFor='let opt of rnameArray; let i=i' [ngValue]=opt  >{{opt.name}}</option>
            </select>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary col-sm-3 pt-3 pb-3" (click)='conformRule()'  data-dismiss="modal" >Create rule</button>
        <button type="button" class="btn btn-secondary col-sm-3 pt-3 pb-3" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!--Add rule modal ends here-->